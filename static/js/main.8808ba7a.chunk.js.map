{"version":3,"sources":["config/var.js","util/useLongPress.js","components/minesweeper/mine.js","shared/button/index.js","shared/modal/index.js","actions/minesweeper.js","components/minesweeper/index.js","pages/minesweeper/index.js","App.js","reportWebVitals.js","reducers/minesweeper.js","reducers/index.js","config/configureStore.js","index.js"],"names":["COLOR","numOfMines","1","2","3","4","5","6","7","8","useLongPress","callback","ms","useState","startLongPress","setStartLongPress","useEffect","timerId","setTimeout","clearTimeout","onMouseDown","onMouseUp","onMouseLeave","onTouchStart","onTouchEnd","MineWrapper","styled","div","css","isVisible","isBoom","Cell","props","text","Mine","x","y","isFlag","isBomb","isWin","onRightClick","onClick","numOfNeighbourMines","cellText","userLongPress","onContextMenu","element","ButtonWrapper","Button","children","ModalWrapper","Modal","okText","imgSrc","className","src","alt","initialBoard","sizeOfBoard","type","payload","onExpandVisibleMine","BoardWrapper","Minesweeper","dispatch","useDispatch","mines","useSelector","state","minesweeper","isGameStart","setIsGameStart","isShowGameOver","setIsShowGameOver","reduce","sumOfRow","rowOfMines","sumOfColumn","targetMine","modalText","modalOkText","modalImage","onUserClick","onCloseGame","initialMines","preventDefault","onFlaggedMine","map","lineOfMine","row","mine","column","PageWrapper","MinesweeperPage","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","initState","minesweeperReducer","action","updatedMines","i","j","push","minePool","xOfMine","Math","floor","random","yOfMine","find","coord","length","forEach","dx","dy","queue","shift","yOfQueue","xOfQueue","isNotOutOfBound","isEmptyMine","k","count","allReducers","combineReducers","env","process","REACT","configureStore","preloadedState","createStore","applyMiddleware","thunk","apiMiddleware","logger","window","__INITIAL_STATE__","__REDUX_DEVTOOLS_EXTENSION__","store","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8808ba7a.chunk.js","sourcesContent":["export const COLOR = {\n  numOfMines: {\n    1: 'blue',\n    2: 'green',\n    3: 'red',\n    4: 'purple',\n    5: 'maroon',\n    6: 'turquoise',\n    7: 'black',\n    8: 'white',\n  }\n};\n","import { useState, useEffect } from 'react';\n\nconst useLongPress = (callback = () => {}, ms = 300) => {\n  const [startLongPress, setStartLongPress] = useState(false);\n\n  useEffect(() => {\n    let timerId;\n    if (startLongPress) {\n      timerId = setTimeout(callback, ms);\n    } else {\n      clearTimeout(timerId);\n    }\n\n    return () => {\n      clearTimeout(timerId);\n    };\n  }, [callback, ms, startLongPress]);\n\n  return {\n    onMouseDown: () => setStartLongPress(true),\n    onMouseUp: () => setStartLongPress(false),\n    onMouseLeave: () => setStartLongPress(false),\n    onTouchStart: () => setStartLongPress(true),\n    onTouchEnd: () => setStartLongPress(false),\n  };\n};\n\nexport default useLongPress;\n","import styled, { css } from 'styled-components';\nimport { COLOR } from '../../config/var';\nimport useLongPress from '../../util/useLongPress.js';\n\nconst MineWrapper = styled.div`\n    width: 50px;\n    height: 50px;\n    border: 1px black solid;\n    border-radius: 5px;\n    cursor: pointer;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 20px;\n    font-weight: 600;\n    ${css`\n        background-color: ${({ isVisible, isBoom }) => (isBoom ? 'red' : (isVisible ? '#dff7f5' : '#0092e0'))};\n    `}\n`;\n\nconst Cell = styled.div`\n  ${(props) => (\n    css` color: ${COLOR.numOfMines[props.text] || 'black'}`\n  )}\n`;\n\nconst cellText = (isFlag, isBomb, isVisible, isWin, numOfNeighbourMines) => {\n  if (isFlag) {\n    return 'ðŸš©';\n  } else if ((isBomb && isWin) || (isBomb && isVisible)) {\n    return 'ðŸ’£';\n  } else if (isWin || isVisible) {\n    return numOfNeighbourMines || '';\n  } else {\n    return '';\n  }\n};\n\nconst Mine = ({\n  x, y, isFlag, isBomb, isVisible, isWin, onRightClick, onClick, numOfNeighbourMines\n}) => {\n  const isBoom = isVisible && isBomb;\n  const text = cellText(isFlag, isBomb, isVisible, isWin, numOfNeighbourMines);\n  const userLongPress = useLongPress(() => onRightClick(x, y, isFlag), 800);\n  return (\n    <MineWrapper\n      isVisible={ isVisible }\n      isBoom={ isBoom }\n      onClick={ () => onClick(x, y, isBomb, isFlag) }\n      onContextMenu={ (element) => onRightClick(x, y, isFlag, element) }\n      { ...userLongPress }\n    >\n      <Cell text={ text }>{text}</Cell>\n    </MineWrapper>\n  );\n};\n\nexport default Mine;\n","import styled from 'styled-components';\n\nconst ButtonWrapper = styled.div`\n  display: inline-block;\n  padding: 10px 15px;\n  border-radius: 15px;\n  background-color: #00304c;\n  color: white;\n  font-weight: bold;\n  cursor: pointer;\n`;\n\nconst Button = (props) => {\n  return <ButtonWrapper { ...props }>{props.children}</ButtonWrapper>;\n};\nexport default Button;\n","import styled from 'styled-components';\nimport Button from '../button';\n\nconst ModalWrapper = styled.div`\n    position: absolute;\n    left: 0;\n    top: 0;\n    z-index: 1000;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    .background {\n        width: 100vw;\n        height: 100vh;\n        opacity: 0.6;\n        background-color: black;\n    }\n    .body {\n        overflow: hidden;\n        position: absolute;\n        padding: 20px;\n        background-color: white;\n        border-radius: 10px;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n    }\n    .text {\n        font-size: 24px;\n        font-weight: 600;\n        margin: 10px;\n    }\n    .img {\n      margin: 10px;\n      height: 200px;\n    }\n`;\nconst Modal = ({\n  text, okText, onClick, isVisible, imgSrc\n}) => {\n  return (\n    <>\n      {isVisible && (\n        <ModalWrapper>\n          <div className=\"background\" />\n          <div className=\"body\">\n            <p className=\"text\">{text}</p>\n            <img className=\"img\" src={ imgSrc } alt=\"modal\" />\n            <Button onClick={ onClick }>{okText || 'OK'}</Button>\n          </div>\n        </ModalWrapper>\n      )}\n    </>\n  );\n};\n\nexport default Modal;\n","export const initialBoard = (sizeOfBoard, numOfMines) => (\n  {\n    type: 'INITIAL_BOARD',\n    payload: {\n      sizeOfBoard,\n      numOfMines,\n    }\n  }\n);\n\nexport const initialMines = (x, y) => (\n  {\n    type: 'INITIAL_MINES',\n    payload: {\n      x, y\n    }\n  }\n);\n\nexport const countNumOfNeighbourMines = () => (\n  {\n    type: 'COUNT_NEIGHBOUR_MINES',\n  }\n);\n\nexport const onExpandVisibleMine = (x, y) => (\n  {\n    type: 'EXPAND_VISIBLE_MINES',\n    payload: {\n      x, y\n    }\n  }\n);\n\nexport const onFlaggedMine = (x, y, isFlag) => (\n  {\n    type: 'FLAGGED_MINE',\n    payload: {\n      x, y, isFlag\n    }\n  }\n);\n\nexport const onCloseGame = (x, y) => (\n  {\n    type: 'CLOSE_GAME',\n    payload: {\n      x, y\n    }\n  }\n);\n","import { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport styled, { css } from 'styled-components';\nimport Mine from './mine';\nimport Modal from '../../shared/modal';\nimport {\n  initialBoard, initialMines, onExpandVisibleMine, countNumOfNeighbourMines, onCloseGame, onFlaggedMine\n} from '../../actions/minesweeper';\n\nconst BoardWrapper = styled.div`\n    ${({ sizeOfBoard }) => (\n    css`\n        display: grid;\n        max-width: calc(${sizeOfBoard} * 55px);\n        grid-gap: 5px;\n        grid-template-columns: repeat(${sizeOfBoard}, 1fr);\n        grid-template-rows: repeat(${sizeOfBoard}, 1fr);\n      `\n  )}\n`;\n\nconst Minesweeper = ({ sizeOfBoard, numOfMines }) => {\n  const dispatch = useDispatch();\n  const mines = useSelector((state) => state.minesweeper.mines);\n  const [isGameStart, setIsGameStart] = useState(false);\n  const [isShowGameOver, setIsShowGameOver] = useState(false);\n  const isWin = !isShowGameOver && numOfMines === (sizeOfBoard ** 2 - mines.reduce((sumOfRow, rowOfMines) => sumOfRow + rowOfMines.reduce((sumOfColumn, targetMine) => sumOfColumn + (targetMine.isVisible ? 1 : 0), 0), 0));\n  const modalText = isWin ? 'You win!!' : (isShowGameOver ? 'You clicked the bomb!!' : '');\n  const modalOkText = isWin ? 'Play again' : (isShowGameOver ? 'OK' : '');\n  const modalImage = isWin ? 'https://media3.giphy.com/media/qYGvebgOKGygdQgflY/giphy.gif?cid=ecf05e47i0qme2wi67ynw5qtcvav9yxuzpgvg3cvwimwob4o&rid=giphy.gif' : isShowGameOver ? 'https://media0.giphy.com/media/11KSh7jeHLEp5m/giphy.gif?cid=ecf05e47o4nh1dozkvly9x6bfcbv19gbhqqui2jw1zb9bcem&rid=giphy.gif' : '';\n\n  const onUserClick = (x, y, isBomb, isFlag) => {\n    if (isGameStart) {\n      if (isBomb && !isFlag) {\n        dispatch(onCloseGame(x, y));\n        setIsShowGameOver(true);\n      } else if (!isFlag) {\n        dispatch(onExpandVisibleMine(x, y));\n      }\n    } else {\n      dispatch(initialMines(x, y));\n      dispatch(countNumOfNeighbourMines());\n      dispatch(onExpandVisibleMine(x, y));\n      setIsGameStart(true);\n    }\n  };\n\n  const onRightClick = (x, y, isFlag, element) => {\n    element && element.preventDefault();\n    dispatch(onFlaggedMine(x, y, isFlag));\n  };\n\n  const onOkModal = () => {\n    dispatch(initialBoard(sizeOfBoard, numOfMines));\n    setIsShowGameOver(false);\n    setIsGameStart(false);\n  };\n\n  useEffect(() => {\n    dispatch(initialBoard(sizeOfBoard, numOfMines));\n    setIsGameStart(false);\n    setIsShowGameOver(false);\n  }, [dispatch, sizeOfBoard, numOfMines]);\n\n  return (\n    <BoardWrapper sizeOfBoard={ sizeOfBoard }>\n      { mines.map((lineOfMine, row) => lineOfMine.map((mine, column) => (\n        <Mine\n          isWin={ isWin }\n          key={ `${column}-${row}` }\n          onClick={ onUserClick }\n          onRightClick={ onRightClick }\n          { ...mine }\n        />\n      ))) }\n      <Modal\n        text={ modalText }\n        okText={ modalOkText }\n        imgSrc={ modalImage }\n        isVisible={ isShowGameOver || isWin }\n        onClick={ onOkModal }\n      />\n    </BoardWrapper>\n  );\n};\n\nexport default Minesweeper;\n","import { useState } from 'react';\nimport styled from 'styled-components';\nimport MinesweeperBoard from '../../components/minesweeper';\n\nconst PageWrapper = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n    background-color: #d1fdac;\n    height: 100vh;\n    .title {\n        font-size: 32px;\n        font-weight: 500;\n        margin: 40px 20px;\n    }\n`;\nconst MinesweeperPage = () => {\n  const [sizeOfBoard] = useState(6);\n  const [numOfMines] = useState(4);\n  return (\n    <PageWrapper>\n      <h1 className=\"title\">Minesweeper</h1>\n      <MinesweeperBoard sizeOfBoard={ sizeOfBoard } numOfMines={ numOfMines } />\n    </PageWrapper>\n  );\n};\n\nexport default MinesweeperPage;\n","import MinesweeperPage from './pages/minesweeper';\n\nconst App = () => {\n  return (\n    <>\n      <MinesweeperPage />\n    </>\n  );\n};\n\nexport default App;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({\n      getCLS, getFID, getFCP, getLCP, getTTFB\n    }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","const initState = {\n  mines: [[]],\n  sizeOfBoard: 0,\n  numOfMines: 0,\n};\n\nconst minesweeperReducer = (state = initState, action) => {\n  switch (action.type) {\n    case 'INITIAL_BOARD': {\n      const { sizeOfBoard, numOfMines } = action.payload;\n      let updatedMines = [];\n      for (let i = 0; i < sizeOfBoard; i++) {\n        let lineOfMine = [];\n        for (let j = 0; j < sizeOfBoard; j++) {\n          lineOfMine.push({\n            x: j,\n            y: i,\n            isBomb: false,\n            isVisible: false,\n          });\n        }\n        updatedMines.push(lineOfMine);\n      }\n      return {\n        ...state,\n        mines: updatedMines,\n        sizeOfBoard: sizeOfBoard,\n        numOfMines: numOfMines,\n      };\n    }\n    case 'INITIAL_MINES': {\n      const { x, y } = action.payload;\n      const { sizeOfBoard, numOfMines, mines } = state;\n      let minePool = [];\n      while (minePool.length < numOfMines) {\n        const xOfMine = Math.floor(Math.random() * sizeOfBoard);\n        const yOfMine = Math.floor(Math.random() * sizeOfBoard);\n        if (xOfMine !== x && yOfMine !== y && !minePool.find((coord) => coord.x === xOfMine && coord.y === yOfMine)) {\n          minePool.push({ x: xOfMine, y: yOfMine });\n        }\n      }\n      let updatedMines = [...mines];\n      minePool.forEach((mine) => {\n        updatedMines[mine.y][mine.x] = {\n          ...updatedMines[mine.y][mine.x],\n          isBomb: true,\n        };\n      });\n      return {\n        ...state,\n        mines: updatedMines,\n      };\n    }\n    case 'EXPAND_VISIBLE_MINES': {\n      const { x, y } = action.payload;\n      const { mines, sizeOfBoard } = state;\n      let updatedMines = [...mines];\n      const dx = [1, -1, 0, 0];\n      const dy = [0, 0, 1, -1];\n      let queue = [[y, x]];\n      while (queue.length > 0) {\n        let [yOfQueue, xOfQueue] = queue.shift();\n        const isNotOutOfBound = (xOfQueue >= 0 && xOfQueue < sizeOfBoard && yOfQueue >= 0 && yOfQueue < sizeOfBoard);\n        if (isNotOutOfBound) {\n          const isEmptyMine = !(updatedMines[yOfQueue][xOfQueue].numOfNeighbourMines > 0) && !(updatedMines[yOfQueue][xOfQueue].isVisible);\n          if (isEmptyMine) {\n            for (let k = 0; k < dx.length; k++) {\n              queue.push([yOfQueue + dy[k], xOfQueue + dx[k]]);\n            }\n          }\n          updatedMines[yOfQueue][xOfQueue].isVisible = true;\n        }\n      }\n      return {\n        ...state,\n        mines: updatedMines,\n      };\n    }\n    case 'COUNT_NEIGHBOUR_MINES': {\n      const { sizeOfBoard, mines } = state;\n      let updatedMines = [...mines];\n      for (let y = 0; y < sizeOfBoard; y++) {\n        for (let x = 0; x < sizeOfBoard; x++) {\n          let count = 0;\n          (y - 1 >= 0) && (x - 1 >= 0) && mines[y - 1][x - 1].isBomb && count++;\n          (y - 1 >= 0) && mines[y - 1][x].isBomb && count++;\n          (y - 1 >= 0) && (x + 1 < sizeOfBoard) && mines[y - 1][x + 1].isBomb && count++;\n          (y + 1 < sizeOfBoard) && (x - 1 >= 0) && mines[y + 1][x - 1].isBomb && count++;\n          (y + 1 < sizeOfBoard) && mines[y + 1][x].isBomb && count++;\n          (y + 1 < sizeOfBoard) && (x + 1 < sizeOfBoard) && mines[y + 1][x + 1].isBomb && count++;\n          (x - 1 >= 0) && mines[y][x - 1].isBomb && count++;\n          (x + 1 < sizeOfBoard) && mines[y][x + 1].isBomb && count++;\n          updatedMines[y][x] = {\n            ...mines[y][x],\n            numOfNeighbourMines: count,\n          };\n        }\n      }\n      return {\n        ...state,\n        mines: updatedMines,\n      };\n    }\n    case 'CLOSE_GAME': {\n      const { x, y } = action.payload;\n      const { mines } = state;\n      let updatedMines = [...mines];\n      updatedMines[y][x] = {\n        ...updatedMines[y][x],\n        isVisible: true,\n      };\n      return {\n        ...state,\n        mines: updatedMines,\n      };\n    }\n    case 'FLAGGED_MINE': {\n      const { x, y, isFlag } = action.payload;\n      const { mines } = state;\n      let updatedMines = [...mines];\n      updatedMines[y][x] = {\n        ...updatedMines[y][x],\n        isFlag: !isFlag,\n      };\n      return {\n        ...state,\n        mines: updatedMines,\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n\nexport default minesweeperReducer;\n","import { combineReducers } from 'redux';\nimport minesweeperReducer from './minesweeper';\n\nconst allReducers = combineReducers({\n  minesweeper: minesweeperReducer,\n});\n\nexport default allReducers;\n","import { createStore, applyMiddleware } from 'redux';\nimport logger from 'redux-logger';\nimport thunk from 'redux-thunk';\nimport { apiMiddleware } from 'redux-api-middleware';\nimport allReducers from '../reducers';\n\nconst env = process.env.REACT || 'dev';\n\nconst configureStore = (preloadedState) => {\n  const store = env === 'dev'\n    ? createStore(allReducers, preloadedState, applyMiddleware(thunk, apiMiddleware, logger))\n    : createStore(allReducers, preloadedState, applyMiddleware(thunk, apiMiddleware));\n  return store;\n};\n\nexport default configureStore;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { Provider } from 'react-redux';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport configureStore from './config/configureStore';\n\nconst initState = window.__INITIAL_STATE__;\nwindow.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__();\n\nconst store = configureStore(initState);\n\nReactDOM.render(\n  <Provider store={ store }>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}